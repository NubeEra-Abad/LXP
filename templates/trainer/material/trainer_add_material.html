{% extends 'trainer/trainerbase.html' %}
{% load widget_tweaks %}
{% block content %}
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<div>
	<nav aria-label="breadcrumb">
		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="../../../../trainer/trainer-dashboard">Dashboard</a></li>
			<li class="breadcrumb-item"><a href="../../../../trainer/trainer-view-material">View Material</a></li>
			<li class="breadcrumb-item active" aria-current="page">Add Material</li>
		</ol>
	</nav>
</div>
<h2 style="text-align:center; color:blue;">Add Material</h2>
<form method="POST" id="materialForm" data-modules-url="{% url 'ajax_load_modules' %}" autocomplete="off"
	style="margin:100px;margin-top: 0px;">
	{%csrf_token%}
	<div class="form-group">
		<div class="container">
			<input type="hidden" name="myvalue" id="myvalue">

			<BR><BR>
			<div class="row">
				<div class="col-md-3 col-xl-3">
					<label for="subject_name">Subject Name</label>
					{% render_field materialForm.subject class="form-control"%}
				</div>
				<div class="col-md-3 col-xl-3">
					<label for="module_name">Module Name</label>
					{% render_field materialForm.module class="form-control"%}
				</div>
				<div class="col-md-3 col-xl-3">
					<label for="chapter_name">Chapter Name</label>
					{% render_field materialForm.chapter class="form-control"%}
				</div>
				<div class="col-md-3 col-xl-3">
					<label for="topic_name">Topic Name</label>
					{% render_field materialForm.topic class="form-control"%}
				</div>

				<label for="mtype">Material Type</label>
				{% render_field materialForm.mtype class="form-control"%}

				<label for="urlvalue">URL</label>
				{% render_field materialForm.urlvalue class="form-control" placeholder="Material URL" %}


				<label for="description">Description</label>
				{% render_field materialForm.description class="form-control" placeholder="Description" %}

				<button class="btn btn-primary form-control" type="submit"
					onclick="return checkvalid(event);">SUBMIT</button>
			</div>
		</div>
	</div>
</form>
<br>

<script>
	function checkvalid(e) {
		// try {
		// 	var inputVal = document.getElementById("urlvalue").value;
		// 	if (inputVal == '') {

		// 	}
		// 	else {
		// 		new URL(inputVal);
		// 		return true;
		// 	}
		// } catch (err) {
		// 	alert("Invalid URL");
		// 	e.preventDefault();
		// 	let theinput = document.querySelector(".word"); //Get the input 
		// 	theinput.focus(); // focus on input 
		// 	return false;
		// }
		return true;

	}

</script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
	$("#id_subject").change(function () {
		var url = $("#materialForm").attr("data-modules-url");  // get the url of the `load_topics` view
		var subjectId = $(this).val();  // get the selected subject ID from the HTML input

		$.ajax({                       // initialize an AJAX request
			url: '{% url 'ajax_load_modules' %}',                    // set the url of the request (= localhost:8000/hr/ajax/load-topics/)
			data: {
				'subject': subjectId       // add the subject id to the GET parameters
			},
			success: function (data) {   // `data` is the return of the `load_topics` view function
				$("#id_module").html(data);  // replace the contents of the topic input with the data that came from the server
			}
		});

	});
	// this one is for fetching vanue data
	$("#id_module").change(function () { //django-model-form created this id
		var url = $("#materialForm").attr("data-modules-url");  // get the url of the `load_topics` view
		var moduleId = $(this).val();  // get the selected subject ID from the HTML input

		$.ajax({                       // initialize an AJAX request
			url: '{% url 'ajax_load_chapters' %}',                    // set the url of the request (= localhost:8000/hr/ajax/load-topics/) course_form.html template has this url var
			data: {
				'module': moduleId       // add the subject id to the GET parameters
			},
			success: function (data) {   // `data` is the return of the `load_topics` view function
				$("#id_chapter").html(data);  // replace the contents of the topic input with the data that came from the server
			}
		});

	});

	$("#id_chapter").change(function () { //django-model-form created this id
		var url = $("#materialForm").attr("data-chapters-url");  // get the url of the `load_topics` view
		var chapterId = $(this).val();  // get the selected subject ID from the HTML input

		$.ajax({                       // initialize an AJAX request
			url: '{% url 'ajax_load_topics' %}',                    // set the url of the request (= localhost:8000/hr/ajax/load-topics/) course_form.html template has this url var
			data: {
				'chapter': chapterId       // add the subject id to the GET parameters
			},
			success: function (data) {   // `data` is the return of the `load_topics` view function
				$("#id_topic").html(data);  // replace the contents of the topic input with the data that came from the server
			}
		});

	});

</script>
{% if messages %}
{% for message in messages %}
{{ message }}
{% endfor %}
{% endif %}
{% endblock content %}