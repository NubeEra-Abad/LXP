{% extends 'cto/ctobase.html' %}
{% load static %}

{% block title %}{% endblock %}
{% block content %}
<h2>Course</h2>
<div class="col-md-4">
  <form action="" method="post">{% csrf_token %}
    {{ courseForm.as_p }}

    <table class="table">
      {{ coursedetailsForm.management_form }}

      {% for form in coursedetailsForm.forms %}
      {% if forloop.first %}
      <thead>
        <tr>
          {% for field in form.visible_fields %}
          <th>{{ field.label|capfirst|cut:"id" }}</th>
          {% endfor %}
        </tr>
      </thead>
      {% endif %}
      <tr class="{% cycle row1 row2 %} formset_row">
        {% for field in form.visible_fields %}
        <td>
          {# Include the hidden fields in the form #}
          {% if forloop.first %}
          {% for hidden in form.hidden_fields %}
          {{ hidden }}
          {% endfor %}
          {% endif %}
          {{ field.errors.as_ul }}
          {{ field }}
        </td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
    <input type="submit" value="Save" /> <a href="{% url 'course-list' %}">back to the list</a>
  </form>
  {% if messages %}
  {% for message in messages %}
  {{ message }}
  {% endfor %}
  {% endif %}
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'formset/jquery.formset.js' %}"></script>
<script type="text/javascript">
  $('.formset_row').formset({
    addText: 'add row',
    deleteText: 'remove',
    prefix: 'coursedetailsForm.prefix'
  });
</script>
{% endblock %}