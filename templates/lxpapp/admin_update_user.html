{% extends 'lxpapp/adminbase.html' %}
{% block content %}
{%load static%}

<head>
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <link href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" rel="stylesheet" id="bootstrap-css">
  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/gh/jeffreydwalter/ColReorderWithResize@9ce30c640e394282c9e0df5787d54e5887bc8ecc/ColReorderWithResize.js"></script>

  <style media="screen">
    a:link {
      text-decoration: none;
    }

    h6 {
      text-align: center;
    }

    .row {
      margin: 100px;
    }

    select.multiselect {
      width: 50%;
      height: 204px;
      line-height: 50px;
    }

    select.singleselect {
      width: 50%;
    }

    table.dataTable tr.odd {
      background-color: #E2E4FF;
    }

    table.dataTable tr.even {
      background-color: white;
    }
  </style>
  <script src="https://unpkg.com/htmx.org@1.4.1"></script>
  <script src="https://unpkg.com/htmx.org/dist/ext/class-tools.js"></script>
</head>
<br><br>
<div class="container">
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h6 class="panel-title">User : {{username}}</h6>
    </div>
    <table class="table table-hover" id="dev-table">
      {% for entry in users %}
            {% if entry.utype == 2 or entry.utype == 0 %}
                  {% for t in learnercourses %}
                        {% if forloop.counter == 1 %}
                        <thead>
                          <tr>
                            <th>Course Names</th>
                          </tr>
                        </thead>
                        <td> {{t.course}}</td>
                        {% else %}
                        <tr>
                          <td> {{t.course}}</td>
                        </tr>
                        {% endif %}
                  {% endfor %}
            {% endif %}
      {% endfor %}
    </table>
    <form method="POST" autocomplete="off" style="margin:100px;margin-top: 0px;">
      {%csrf_token%}
      <div class="form-group">
        <label for="field2">Active</label>
        {% for entry in users %}

        {% if entry.status %}
        <input type="checkbox" name="active" id="active" checked><br>
        {% else %}
        <input type="checkbox" name="active" id="active" value="{{entry.status}}"><br>
        {% endif %}

        <label for="field1">Course Name</label>
        <select class="multiselect" name="courses[]" id="field1" multiple multiselect-search="true"
          multiselect-select-all="true" multiselect-max-items="10" onchange="console.log(this.selectedOptions)">
          {% for entry in courses %}
          <option value="{{ entry.id}}">{{ entry.course_name }}</option>
          {% endfor %}
        </select><br>
        <label for="field2">User Type</label>
        <select class="singleselect" name="utype[]" id="field2" onchange="console.log(this.selectedOptions)">

          {% if entry.utype == 1 %}
          <option value="1" selected>Trainer</option>
          {% else %}
          <option value="1">Trainer</option>
          {% endif %}

          {% if entry.utype == 2 or entry.utype == 0 %}
          <option value="2" selected>Learner</option>
          {% else %}
          <option value="2">Learner</option>
          {% endif %}

          {% if entry.utype == 3 %}
          <option value="3" selected>CTO</option>
          {% else %}
          <option value="3">CTO</option>
          {% endif %}

          {% if entry.utype == 4 %}
          <option value="4" selected>CFO</option>
          {% else %}
          <option value="4">CFO</option>
          {% endif %}
        </select>
        {% endfor %}
      </div>
      <button type="submit" class="btn btn-primary">Update</button>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
    crossorigin="anonymous"></script>
  <script src="/static/multiselect-dropdown.js"></script>
</div>

<br><br><br><br><br><br>
{% endblock content %}